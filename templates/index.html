{% extends "base.html" %}
{% block content %}
<section class="hero">
    <h1>๐ {{ _('hero.title') }}</h1>
    <p>{{ _('hero.subtitle') }}</p>
    <div class="hero-actions">
        {% if session.user_id %}
        <a href="{{ url_for('add_product') }}" class="btn btn-primary btn-lg btn-hero-sell">
            <i class="fas fa-plus-circle"></i> ุจุน ููุชุฌู ุงูุขู
        </a>
        {% else %}
        <a href="{{ url_for('login') }}" class="btn btn-primary btn-lg btn-hero-sell">
            <i class="fas fa-user-plus"></i> ุงุจุฏุฃ ุงูุจูุน ูุฌุงูุงู
        </a>
        {% endif %}
        <a href="{{ url_for('products') }}" class="btn btn-outline btn-lg">
            <i class="fas fa-search"></i> {{ _('hero.cta_button') }}
        </a>
    </div>
</section>

<!-- Categories Section -->
<section class="section">
    <h2 class="section-title">{{ _('categories.title') }}</h2>
    <div class="categories-grid">
        <a href="{{ url_for('products') }}?category=ุณูุงุฑุงุช ูุณุชุนููุฉ" class="category-card">
            <div class="category-image">
                <img src="https://images.unsplash.com/photo-1549317661-bd32c8ce0db2?auto=format&fit=crop&w=800&q=80" alt="ุณูุงุฑุงุช ูุณุชุนููุฉ" loading="lazy">
                <div class="category-overlay">
                    <i class="fas fa-car"></i>
                </div>
            </div>
            <div class="category-content">
                <h3>ุณูุงุฑุงุช ูุณุชุนููุฉ</h3>
                <p>ุงูุชุดู ุฃูุถู ุงูุณูุงุฑุงุช ุงููุณุชุนููุฉ ุจุฃุณุนุงุฑ ููุงุณุจุฉ</p>
                {% if session.user_id %}
                <a href="{{ url_for('add_product') }}?category=ุณูุงุฑุงุช ูุณุชุนููุฉ" class="btn btn-add-product-category">
                    <i class="fas fa-plus-circle"></i> ุจุน ุณูุงุฑุชู ุงููุณุชุนููุฉ
                </a>
                {% else %}
                <button onclick="showLoginPopup('ุณูุงุฑุงุช ูุณุชุนููุฉ')" class="btn btn-add-product-guest">
                    <i class="fas fa-plus"></i> ุฅุถุงูุฉ ููุชุฌ
                </button>
                {% endif %}
            </div>
        </a>
        
        <a href="{{ url_for('products') }}?category=ุงูููุงุชู ุงููุญูููุฉ" class="category-card">
            <div class="category-image">
                <img src="https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?auto=format&fit=crop&w=800&q=80" alt="ููุงุชู ูุญูููุฉ" loading="lazy">
                <div class="category-overlay">
                    <i class="fas fa-mobile-alt"></i>
                </div>
            </div>
            <div class="category-content">
                <h3>ุงูููุงุชู ุงููุญูููุฉ</h3>
                <p>ุฃุญุฏุซ ุงูููุงุชู ุงูุฐููุฉ ูู ุฌููุน ุงููุงุฑูุงุช ุงูุนุงูููุฉ</p>
                {% if session.user_id %}
                <a href="{{ url_for('add_product') }}?category=ุงูููุงุชู ุงููุญูููุฉ" class="btn btn-add-product-category">
                    <i class="fas fa-plus-circle"></i> ุจุน ูุงุชูู ุงููุณุชุนูู
                </a>
                {% else %}
                <button onclick="showLoginPopup('ุงูููุงุชู ุงููุญูููุฉ')" class="btn btn-add-product-guest">
                    <i class="fas fa-plus"></i> ุฅุถุงูุฉ ููุชุฌ
                </button>
                {% endif %}
            </div>
        </a>
        
        <a href="{{ url_for('products') }}?category=ุงูุฅููุชุฑูููุงุช" class="category-card">
            <div class="category-image">
                <img src="https://images.unsplash.com/photo-1496181133206-80ce9b88a853?auto=format&fit=crop&w=800&q=80" alt="ุฅููุชุฑูููุงุช" loading="lazy">
                <div class="category-overlay">
                    <i class="fas fa-laptop"></i>
                </div>
            </div>
            <div class="category-content">
                <h3>ุงูุฅููุชุฑูููุงุช</h3>
                <p>ุฃุฌูุฒุฉ ุฅููุชุฑูููุฉ ูุชููุนุฉ ูุฅูุณุณูุงุฑุงุช ุชูููุฉ</p>
                {% if session.user_id %}
                <a href="{{ url_for('add_product') }}?category=ุงูุฅููุชุฑูููุงุช" class="btn btn-add-product-category">
                    <i class="fas fa-plus-circle"></i> ุจุน ุฌูุงุฒู ุงููุณุชุนูู
                </a>
                {% else %}
                <button onclick="showLoginPopup('ุงูุฅููุชุฑูููุงุช')" class="btn btn-add-product-guest">
                    <i class="fas fa-plus"></i> ุฅุถุงูุฉ ููุชุฌ
                </button>
                {% endif %}
            </div>
        </a>
        
        <a href="{{ url_for('products') }}?category=ุณูุงุนุงุช ูุงุณูููุฉ" class="category-card">
            <div class="category-image">
                <img src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?auto=format&fit=crop&w=800&q=80" alt="ุณูุงุนุงุช ูุงุณูููุฉ" loading="lazy">
                <div class="category-overlay">
                    <i class="fas fa-headphones"></i>
                </div>
            </div>
            <div class="category-content">
                <h3>ุณูุงุนุงุช ูุงุณูููุฉ</h3>
                <p>ุณูุงุนุงุช ุนุงููุฉ ุงูุฌูุฏุฉ ูุชุฌุฑุจุฉ ุตูุชูุฉ ูููุฒุฉ</p>
                {% if session.user_id %}
                <a href="{{ url_for('add_product') }}?category=ุณูุงุนุงุช ูุงุณูููุฉ" class="btn btn-add-product-category">
                    <i class="fas fa-plus-circle"></i> ุจุน ุณูุงุนุงุชู ุงููุณุชุนููุฉ
                </a>
                {% else %}
                <button onclick="showLoginPopup('ุณูุงุนุงุช ูุงุณูููุฉ')" class="btn btn-add-product-guest">
                    <i class="fas fa-plus"></i> ุฅุถุงูุฉ ููุชุฌ
                </button>
                {% endif %}
            </div>
        </a>
        
        <a href="{{ url_for('products') }}?category=ูุงููุฑุงุช ุงุญุชุฑุงููุฉ" class="category-card">
            <div class="category-image">
                <img src="https://images.unsplash.com/photo-1502920917128-1aa500764cbd?auto=format&fit=crop&w=800&q=80" alt="ูุงููุฑุงุช ุงุญุชุฑุงููุฉ" loading="lazy">
                <div class="category-overlay">
                    <i class="fas fa-camera"></i>
                </div>
            </div>
            <div class="category-content">
                <h3>ูุงููุฑุงุช ุงุญุชุฑุงููุฉ</h3>
                <p>ูุงููุฑุงุช ุงุญุชุฑุงููุฉ ูููุตูุฑูู ูุงูููุงุฉ</p>
                {% if session.user_id %}
                <a href="{{ url_for('add_product') }}?category=ูุงููุฑุงุช ุงุญุชุฑุงููุฉ" class="btn btn-add-product-category">
                    <i class="fas fa-plus-circle"></i> ุจุน ูุงููุฑุชู ุงููุณุชุนููุฉ
                </a>
                {% else %}
                <button onclick="showLoginPopup('ูุงููุฑุงุช ุงุญุชุฑุงููุฉ')" class="btn btn-add-product-guest">
                    <i class="fas fa-plus"></i> ุฅุถุงูุฉ ููุชุฌ
                </button>
                {% endif %}
            </div>
        </a>
        
        <a href="{{ url_for('products') }}?category=ุฃุซุงุซ ููุฒูู" class="category-card">
            <div class="category-image">
                <img src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?auto=format&fit=crop&w=800&q=80" alt="ุฃุซุงุซ ููุฒูู" loading="lazy">
                <div class="category-overlay">
                    <i class="fas fa-couch"></i>
                </div>
            </div>
            <div class="category-content">
                <h3>ุฃุซุงุซ ููุฒูู</h3>
                <p>ุฃุซุงุซ ุนุตุฑู ูููุงุณููู ูุฌููุน ุฃูุญุงุก ุงูููุฒู</p>
                {% if session.user_id %}
                <a href="{{ url_for('add_product') }}?category=ุฃุซุงุซ ููุฒูู" class="btn btn-add-product-category">
                    <i class="fas fa-plus-circle"></i> ุจุน ุฃุซุงุซู ุงููุณุชุนูู
                </a>
                {% else %}
                <button onclick="showLoginPopup('ุฃุซุงุซ ููุฒูู')" class="btn btn-add-product-guest">
                    <i class="fas fa-plus"></i> ุฅุถุงูุฉ ููุชุฌ
                </button>
                {% endif %}
            </div>
        </a>
        
        <a href="{{ url_for('products') }}?category=ุฃุฒูุงุก ูุฅูุณุณูุงุฑุงุช" class="category-card">
            <div class="category-image">
                <img src="https://images.unsplash.com/photo-1441986300917-64674bd600d8?auto=format&fit=crop&w=800&q=80" alt="ููุงุจุณ ูุฅูุณุณูุงุฑุงุช" loading="lazy">
                <div class="category-overlay">
                    <i class="fas fa-tshirt"></i>
                </div>
            </div>
            <div class="category-content">
                <h3>ุฃุฒูุงุก ูุฅูุณุณูุงุฑุงุช</h3>
                <p>ุฃุฒูุงุก ูุฅูุณุณูุงุฑุงุช ูู ุงููุงุฑูุงุช ุงูุนุงูููุฉ</p>
                {% if session.user_id %}
                <a href="{{ url_for('add_product') }}?category=ุฃุฒูุงุก ูุฅูุณุณูุงุฑุงุช" class="btn btn-add-product-category">
                    <i class="fas fa-plus-circle"></i> ุจุน ููุงุจุณู ุงููุณุชุนููุฉ
                </a>
                {% else %}
                <button onclick="showLoginPopup('ุฃุฒูุงุก ูุฅูุณุณูุงุฑุงุช')" class="btn btn-add-product-guest">
                    <i class="fas fa-plus"></i> ุฅุถุงูุฉ ููุชุฌ
                </button>
                {% endif %}
            </div>
        </a>
        
        <a href="{{ url_for('products') }}?category=ุนูุงุฑุงุช" class="category-card">
            <div class="category-image">
                <img src="/static/images/realestate.svg" alt="ุนูุงุฑุงุช" loading="lazy">
                <div class="category-overlay">
                    <i class="fas fa-building"></i>
                </div>
            </div>
            <div class="category-content">
                <h3>๐ข ุนูุงุฑุงุช</h3>
                <p>ุงูุชุดู ุฃูุถู ุงูุนุฑูุถ ุนูู ุงูุดููุ ุงููููุ ูุงููุจุงูู ุงูุณูููุฉ</p>
                {% if session.user_id %}
                <a href="{{ url_for('add_product') }}?category=ุนูุงุฑุงุช" class="btn btn-add-product-category">
                    <i class="fas fa-plus-circle"></i> ุจุน ุนูุงุฑู ุงูุขู
                </a>
                {% else %}
                <button onclick="showLoginPopup('ุนูุงุฑุงุช')" class="btn btn-add-product-guest">
                    <i class="fas fa-plus"></i> ุฅุถุงูุฉ ููุชุฌ
                </button>
                {% endif %}
            </div>
        </a>
        
        <a href="{{ url_for('jobs') }}" class="category-card">
            <div class="category-image">
                <img src="https://images.unsplash.com/photo-1497032628192-86f99bcd76bc?auto=format&fit=crop&w=800&q=80" alt="ูุฑุต ุนูู" loading="lazy">
                <div class="category-overlay">
                    <i class="fas fa-briefcase"></i>
                </div>
            </div>
            <div class="category-content">
                <h3>ูุฑุต ุนูู</h3>
                <p>ูุธุงุฆู ููุฑุต ุนูู ูุชููุฒุฉ ูู ูุฎุชูู ุงููุฌุงูุงุช</p>
                {% if session.user_id %}
                <a href="{{ url_for('add_product') }}?category=ูุฑุต ุนูู" class="btn btn-add-product-category">
                    <i class="fas fa-plus-circle"></i> ุฃุถู ูุฑุตุฉ ุนูู
                </a>
                {% else %}
                <button onclick="showLoginPopup('ูุฑุต ุนูู')" class="btn btn-add-product-guest">
                    <i class="fas fa-plus"></i> ุฅุถุงูุฉ ููุชุฌ
                </button>
                {% endif %}
            </div>
        </a>
    </div>
</section>

<section class="section">
    <h2 class="section-title">ุฃุญุฏุซ ุงูููุชุฌุงุช</h2>
    <div class="products-grid">
        {% for product in featured %}
        <a class="product-card" href="{{ url_for('product_details', product_id=product['id']) }}">
            <img src="{{ product['image_url'] }}" alt="{{ product['name'] }}">
            <div class="product-info">
                <span class="product-category">{{ product['category_name'] or 'ูุฆุฉ ุฃุฎุฑู' }}</span>
                <h3 class="product-title">{{ product['name'] }}</h3>
                <div class="product-footer">
                    <span class="product-price">
                        {% if product['price'] > 0 %}
                            {{ "{:,.0f}".format(product['price']) }} ุฌููู
                        {% else %}
                            ุฑุงุชุจ ุญุณุจ ุงูุงุชูุงู
                        {% endif %}
                    </span>
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
</section>
<!-- Login Popup Modal -->
<div id="loginPopup" class="popup-overlay" style="display: none;">
    <div class="popup-content">
        <button class="popup-close" onclick="closeLoginPopup()">&times;</button>
        <div class="popup-icon">
            <i class="fas fa-user-plus"></i>
        </div>
        <h3>ุชุณุฌูู ุงูุฏุฎูู ูุทููุจ</h3>
        <p id="popupMessage">ูุฅุถุงูุฉ ููุชุฌ ูู ูุฆุฉ <span id="categoryName"></span>ุ ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ุฃููุงู.</p>
        <div class="popup-actions">
            <a href="{{ url_for('login') }}" class="btn btn-primary">
                <i class="fas fa-sign-in-alt"></i> ุชุณุฌูู ุงูุฏุฎูู
            </a>
            <a href="{{ url_for('register') }}" class="btn btn-outline">
                <i class="fas fa-user-plus"></i> ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ
            </a>
        </div>
    </div>
</div>

<script>
function showLoginPopup(category) {
    document.getElementById('categoryName').textContent = category;
    document.getElementById('loginPopup').style.display = 'flex';
    document.body.style.overflow = 'hidden';
}

function closeLoginPopup() {
    document.getElementById('loginPopup').style.display = 'none';
    document.body.style.overflow = 'auto';
}

// Close popup when clicking outside
document.getElementById('loginPopup').addEventListener('click', function(e) {
    if (e.target === this) {
        closeLoginPopup();
    }
});

// Close popup with Escape key
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && document.getElementById('loginPopup').style.display === 'flex') {
        closeLoginPopup();
    }
});
</script>

{% endblock %}
